<Controls:MetroWindow x:Class="WindowsGSM.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WindowsGSM"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        mc:Ignorable="d"
        Title="WindowsGSM" 
        Height="540" 
        Width="960" 
        Icon="Images\WindowsGSM.ico"
        ResizeMode="CanResizeWithGrip"
        MinHeight="540"
        MinWidth="960"
        Closing="Window_Closing"
        GlowBrush="{DynamicResource AccentColorBrush}"
        WindowStartupLocation="CenterScreen" StateChanged="Window_StateChanged">

    <Controls:MetroWindow.RightWindowCommands>
        <Controls:WindowCommands>
            <Button x:Name="button_Patreon" Content="Patreon" Click="Button_Patreon_Click"/>
            <Button x:Name="button_Settings" Content="Settings" Click="Button_Settings_Click"/>
            <Button x:Name="button_Hide" Content="Hide" Click="Button_Hide_Click"/>
        </Controls:WindowCommands>
    </Controls:MetroWindow.RightWindowCommands>

    <Controls:MetroWindow.Flyouts>
        <Controls:FlyoutsControl>
            <Controls:Flyout x:Name="MahAppFlyout" Header="Settings" Position="Right" Width="250" Theme="Accent">
                <StackPanel>
                    <Controls:ToggleSwitch x:Name="MahAppSwitch_HardWareAcceleration" Header="Hardware Acceleration" BorderThickness="20" Style="{StaticResource MahApps.Metro.Styles.ToggleSwitch.Win10}" IsCheckedChanged="HardWareAcceleration_IsCheckedChanged"/>
                    <Controls:ToggleSwitch x:Name="MahAppSwitch_UIAnimation" Header="UI Animation" BorderThickness="20" Style="{StaticResource MahApps.Metro.Styles.ToggleSwitch.Win10}" IsCheckedChanged="UIAnimation_IsCheckedChanged"/>
                    <Controls:ToggleSwitch x:Name="MahAppSwitch_DarkTheme" Header="Dark Theme" BorderThickness="20" Style="{StaticResource MahApps.Metro.Styles.ToggleSwitch.Win10}" IsCheckedChanged="DarkTheme_IsCheckedChanged"/>
                    <Controls:ToggleSwitch x:Name="MahAppSwitch_StartOnBoot" Header="Start WindowsGSM on Boot" BorderThickness="20" Style="{StaticResource MahApps.Metro.Styles.ToggleSwitch.Win10}" IsCheckedChanged="StartOnBoot_IsCheckedChanged"/>
                    <Controls:ToggleSwitch x:Name="MahAppSwitch_DonorTheme" Header="Donor Theme (Patreon)" BorderThickness="20" Style="{StaticResource MahApps.Metro.Styles.ToggleSwitch.Win10}" IsCheckedChanged="DonorTheme_IsCheckedChanged"/>
                </StackPanel>
            </Controls:Flyout>
        </Controls:FlyoutsControl>
    </Controls:MetroWindow.Flyouts>

    <DockPanel Name="dp">
        <Menu x:Name="menu" Height="30" DockPanel.Dock="Top">
            <MenuItem Header="Servers" Height="30">
                <MenuItem Header="Install GameServer" Click="Install_Click"/>
                <MenuItem Header="Import GameServer" Click="Import_Click"/>
                <Separator/>
                <MenuItem Header="Delete GameServer" Click="Delete_Click"/>
            </MenuItem>
            <MenuItem Header="Actions" Height="30">
                <MenuItem Header="Start" Click="Actions_Start_Click"/>
                <MenuItem Header="Stop" Click="Actions_Stop_Click"/>
                <MenuItem Header="Restart" Click="Actions_Restart_Click"/>
                <Separator/>
                <MenuItem Header="Toggle Console" Click="Actions_ToggleConsole_Click"/>
                <Separator/>
                <MenuItem Header="Update" Click="Actions_Update_Click"/>
                <Separator/>
                <MenuItem Header="Backup" Click="Actions_Backup_Click"/>
                <MenuItem Header="Restore Backup" Click="Actions_RestoreBackup_Click"/>
            </MenuItem>
            <MenuItem Header="Browse" Height="30">
                <MenuItem Header="Server Backups" Click="Browse_ServerBackups_Click"/>
                <MenuItem Header="Server Configs" Click="Browse_ServerConfigs_Click"/>
                <MenuItem Header="Server Files" Click="Browse_ServerFiles_Click"/>
            </MenuItem>
            <MenuItem Header="Tools" Height="30">
                <MenuItem Header="Global Server List Check" Click="Tools_GlobalServerListCheck_Click"/>
                <!--<MenuItem Header="Install Sourcemod+Metamod" Click="Tools_InstallSourcemodMetamod_Click"/>-->
            </MenuItem>
            <MenuItem Header="Help" Height="30">
                <MenuItem Header="Online Documentation" Click="Help_OnlineDocumentation_Click"/>
                <MenuItem Header="Report an issue" Click="Help_ReportIssue_Click"/>
                <MenuItem Header="Check for updates" Click="Help_CheckForUpdate_Click"/>
            </MenuItem>
        </Menu>
        <Grid Height="1" Background="Black" DockPanel.Dock="Top"/>
        <Grid Height="35" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,0,0,0">
            <Label x:Name="label_select" Content="Select a server" HorizontalAlignment="Left" Margin="10,2,0,0" VerticalAlignment="Top" Height="33"/>
            <Grid x:Name="grid_action">
                <Button x:Name="button_Start" Content="START" HorizontalAlignment="Left" Margin="10,5,0,5" Width="110" Height="20" Click="Actions_Start_Click" Background="LimeGreen" Foreground="White"/>
                <Button x:Name="button_Stop" Content="STOP" HorizontalAlignment="Left" Margin="125,5,0,5" Width="110" Height="20" Click="Actions_Stop_Click" Background="Orange" Foreground="White"/>
                <Button x:Name="button_Restart" Content="RESTART" HorizontalAlignment="Left" Margin="240,5,0,5" Width="110" Height="20" Click="Actions_Restart_Click" Background="DeepSkyBlue" Foreground="White"/>
                <Button x:Name="button_Console" Content="TOGGLE CONSOLE" HorizontalAlignment="Left" Margin="355,5,0,5" Width="110" Height="20" Click="Actions_ToggleConsole_Click"/>
                <Button x:Name="button_Update" Content="UPDATE" HorizontalAlignment="Left" Margin="470,5,0,5" Width="110" Height="20" Click="Actions_Update_Click"/>
                <Button x:Name="button_Backup" Content="BACKUP" HorizontalAlignment="Left" Margin="585,5,0,5" Width="110" Height="20" Click="Actions_Backup_Click"/>
            </Grid>
            <Button x:Name="button_Refresh" Content="REFRESH SERVER LIST" Margin="0,5,10,5" Height="20" Click="RefreshServerList_Click" HorizontalAlignment="Right" Width="150"/>
        </Grid>
        <Grid Height="1" Background="Black" DockPanel.Dock="Top"/>
        <Grid DockPanel.Dock="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="4*"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="4*"/>
            </Grid.RowDefinitions>

            <DataGrid x:Name="ServerGrid" SelectionMode="Single" SelectionUnit="FullRow" RowHeaderWidth="0" HeadersVisibility="Column" GridLinesVisibility="None" DockPanel.Dock="Top" SelectionChanged="DataGrid_SelectionChanged" IsSynchronizedWithCurrentItem="True">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" IsReadOnly="True" Binding="{Binding Path=ID}" Width="45" MinWidth="45" MaxWidth="45"/>
                    <DataGridTemplateColumn Header="MOD" IsReadOnly="True" Width="50" MinWidth="50" MaxWidth="50">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="{Binding Icon}" Width="18"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="Status" IsReadOnly="True" Binding="{Binding Path=Status}" Width="80" MinWidth="80" MaxWidth="80"/>
                    <DataGridTextColumn Header="Server Name" IsReadOnly="True" Binding="{Binding Path=Name}" Width="400*"/>
                    <DataGridTextColumn Header="IP Address" IsReadOnly="True" Binding="{Binding Path=IP}" Width="110*"/>
                    <DataGridTextColumn Header="Port" IsReadOnly="True" Binding="{Binding Path=Port}" Width="70*"/>
                    <DataGridTextColumn Header="Default Map" IsReadOnly="True" Binding="{Binding Path=Defaultmap}" Width="200*"/>
                    <DataGridTextColumn Header="Maxplayers" IsReadOnly="True" Binding="{Binding Path=Maxplayers}" Width="130*"/>
                </DataGrid.Columns>
            </DataGrid>
            <GridSplitter Grid.Row="1" Height="5" HorizontalAlignment="Stretch">
                <GridSplitter.Background>
                    <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.ControlDarkDarkColorKey}}"/>
                </GridSplitter.Background>
            </GridSplitter>
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="3*" MinWidth="480"/>
                </Grid.ColumnDefinitions>

                <Grid>

                    <Label x:Name="label_serverdetails" Content="Server Details" HorizontalAlignment="Left" Margin="5,0,0,0" VerticalAlignment="Top"/>
                    <Label x:Name="label_Status" Content="Status:" HorizontalAlignment="Left" Margin="41,21,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_Status" Content="" HorizontalAlignment="Left" Margin="92,22,0,0" Width="207" Height="11" Background="Orange" Foreground="White" VerticalAlignment="Top" IsHitTestVisible="False"/>
                    <Label x:Name="label_ServerGame" Content="Game Server:" HorizontalAlignment="Left" Margin="5,52,0,0" VerticalAlignment="Top"/>
                    <TextBox x:Name="textBox_ServerGame" Height="23" Margin="92,53,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Top" IsReadOnly="true" HorizontalAlignment="Left" Width="372"/>
                    <Label x:Name="label_autorestart" Content="Auto Restart:" HorizontalAlignment="Left" Margin="8,83,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_autorestart" Content="" HorizontalAlignment="Left" Margin="92,84,0,0" Width="50" Height="11" Background="Red" Foreground="White" VerticalAlignment="Top" IsHitTestVisible="False"/>

                    <Label x:Name="label_autostart" Content="Auto Start:" HorizontalAlignment="Left" Margin="178,83,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_autostart" Content="" HorizontalAlignment="Left" Margin="249,85,0,0" Width="50" Height="11" Background="Red" Foreground="White" VerticalAlignment="Top" IsHitTestVisible="False"/>

                    <Label x:Name="label_autoupdate" Content="Auto Update:" HorizontalAlignment="Left" Margin="329,83,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_autoupdate" Content="" HorizontalAlignment="Left" Margin="414,85,0,0" Width="50" Height="11" Background="Red" Foreground="White" VerticalAlignment="Top" IsHitTestVisible="False"/>

                    <Label x:Name="label_updateonstart" Content="Update on Start:" HorizontalAlignment="Left" Margin="313,114,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_updateonstart" Content="" HorizontalAlignment="Left" Margin="414,115,0,0" Width="50" Height="11" Background="Red" Foreground="White" VerticalAlignment="Top" IsHitTestVisible="False"/>

                    <Label x:Name="label_discordalert" Content="Discord Alert:" HorizontalAlignment="Left" Margin="5,114,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_discordalert" Content="" HorizontalAlignment="Left" Margin="92,115,0,0" Width="50" Height="11" Background="Red" Foreground="White" VerticalAlignment="Top" IsHitTestVisible="False"/>
                    <Button x:Name="button_discordtest" Content="Send Test Alert" HorizontalAlignment="Left" Margin="142,115,0,0" VerticalAlignment="Top" Width="157" Height="25" Click="Button_DiscordWebhookTest_Click" IsEnabled="False"/>
                    <Button x:Name="button_clearServerConsole" Content="CLEAR SERVER CONSOLE" Margin="304,22,0,0" VerticalAlignment="Top" Height="18" Click="Button_ClearServerConsole_Click" HorizontalAlignment="Left" Width="160"/>
                    <TextBox x:Name="textBox_wgsmlog" Margin="92,145,10,10" Background="White" CaretBrush="White" Foreground="Black"/>
                    <Label x:Name="label_wgsmlog" Content="WGSM Log:" HorizontalAlignment="Left" Margin="15,145,0,0" VerticalAlignment="Top"/>
                    <Button x:Name="button_clearwgsmlog" Content="CLEAR LOG" Margin="10,183,0,0" VerticalAlignment="Top" Height="18" Click="Button_ClearWGSMLog_Click" HorizontalAlignment="Left" Width="77"/>
                </Grid>

                <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch">
                    <GridSplitter.Background>
                        <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.ControlDarkDarkColorKey}}"/>
                    </GridSplitter.Background>
                </GridSplitter>

                <Grid Grid.Column="2" MinWidth="100">
                    <RichTextBox x:Name="console" FontFamily="Consolas" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility ="Disabled" Background="Black" IsReadOnly="True" Margin="0,0,0,26" BorderBrush="Black" Foreground="White" Opacity="0.995" BorderThickness="0">
                        <RichTextBox.Resources>
                            <Style TargetType="{x:Type Paragraph}">
                                <Setter Property="Margin" Value="0" />
                            </Style>
                        </RichTextBox.Resources>
                    </RichTextBox>
                    <TextBox x:Name="textbox_servercommand" TextWrapping="Wrap" Text="" Margin="0,0,61,0" Height="23" VerticalAlignment="Bottom" KeyDown="Textbox_ServerCommand_KeyDown" IsEnabled="False" Background="Black" BorderBrush="White" Foreground="White" CaretBrush="White" PreviewKeyDown="Textbox_ServerCommand_PreviewKeyDown"/>
                    <Button x:Name="button_servercommand" Content="Send" Click="Button_ServerCommand_Click" IsEnabled="False" Height="26" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="61" Controls:ButtonHelper.CornerRadius="0"/>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Controls:MetroWindow>
